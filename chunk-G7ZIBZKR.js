import{b as Me,d as xe,e as be,f as ve,g as G,h as Pe}from"./chunk-YGGZPHSE.js";import{$ as T,A as te,B as ne,C as ie,D as oe,E as ae,F as re,M as se,N as le,O as de,P as ce,Q as pe,R as me,S as ge,U as ue,V as O,W as _e,X as S,Y as w,Z as y,_ as D,aa as k,b as Z,ba as E,c as m,ca as A,d as g,da as N,e as l,ea as fe,f as q,fa as he,g as K,h as Q,ha as Ce,i as u,ia as F,j as p,ja as V,k as ee,ka as L,l as s,la as W,m as r,ma as B,n as f,o as b,oa as z,p as _,pa as H,q as c,qa as R,r as d,ra as j,sa as U,t as v,u as P,v as h,w as C,x as M,y as I,z as Y}from"./chunk-CLKSRU7N.js";import"./chunk-DUYHUZ4S.js";import"./chunk-7KGURMOZ.js";import"./chunk-2BDPOVPE.js";import"./chunk-675DDOZA.js";import"./chunk-EXZR7M25.js";import"./chunk-G3CV3VGG.js";import"./chunk-JX3TYZ34.js";import"./chunk-RUY5SX76.js";import"./chunk-NIOQNOHM.js";import"./chunk-4U6PRYVA.js";import"./chunk-BTS5SJXR.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-RW4GY4BD.js";function ye(e){let i=e,t=Math.floor(Math.abs(e)),o=e.toString().replace(/^[^.]*\.?/,"").length,n=parseInt(e.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return i===1?1:n===0&&t!==0&&t%1e6===0&&o===0||!(n>=0&&n<=5)?4:5}var Ie=["es",[["a.\xA0m.","p.\xA0m."],void 0,void 0],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",ye];var $,De=function(){if(typeof window>"u")return new Map;if(!$){var e=window;e.Ionicons=e.Ionicons||{},$=e.Ionicons.map=e.Ionicons.map||new Map}return $},J=function(e){Object.keys(e).forEach(function(i){Oe(i,e[i]);var t=i.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();i!==t&&Oe(t,e[i])})},Oe=function(e,i){var t=De(),o=t.get(e);o===void 0?t.set(e,i):o!==i&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(e,'". Ensure that multiple icons are not mapped to the same icon name.'))};var Se=[_e,ue,he,k,B,L,D,N,Ce,E,S,H,y,T,F,fe,A,W,O,j,z,U,w,R,V];var we=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Q({type:i}),i.\u0275inj=Z({imports:[Se]});let e=i;return e})();function ke(e,i){e&1&&(s(0,"span",14),d(1,"Ocupado"),r())}function Ee(e,i){if(e&1){let t=b();s(0,"ion-col",11)(1,"ion-button",12),_("click",function(){let n=m(t).$implicit,a=c(2);return g(a.openModal(n))})("keyup",function(){let n=m(t).$implicit,a=c(2);return g(a.openModal(n))}),d(2),u(3,ke,2,0,"span",13),r()()}if(e&2){let t=i.$implicit,o=c(2);l(),ee("time-booked",o.isTimeSlotBooked(t)),l(),v(" ",t," Hs "),l(),p("ngIf",o.isTimeSlotBooked(t))}}function Ae(e,i){if(e&1&&(s(0,"div",9)(1,"ion-grid")(2,"ion-row"),u(3,Ee,4,4,"ion-col",10),r()()()),e&2){let t=c();l(3),p("ngForOf",t.availableTimes)}}function Ne(e,i){e&1&&(s(0,"p"),d(1,"Pagado"),r())}function Fe(e,i){e&1&&(s(0,"p"),d(1,"Pendiente de pago"),r())}function Ve(e,i){if(e&1&&(s(0,"ion-item")(1,"ion-label")(2,"h2"),d(3),r(),s(4,"p"),d(5),r(),u(6,Ne,2,0,"p",17)(7,Fe,2,0,"p",17),r()()),e&2){let t=i.$implicit;l(3),P("",t.time," HS - ",t.clientName,""),l(2),P("Monto: ",t.amount," - Observaciones: ",t.notes,""),l(),p("ngIf",t.paid),l(),p("ngIf",!t.paid)}}function Le(e,i){e&1&&(s(0,"ion-item")(1,"ion-label"),d(2,"No hay citas registradas para esta fecha."),r()())}function We(e,i){if(e&1&&(s(0,"div",15)(1,"ion-text",2),d(2),I(3,"date"),r(),s(4,"ion-list"),u(5,Ve,8,6,"ion-item",16)(6,Le,3,0,"ion-item",17),r()()),e&2){let t=c();l(2),v("Citas del ",Y(3,3,t.selectedDate,"mediumDate"),""),l(3),p("ngForOf",t.pastAppointments),l(),p("ngIf",t.pastAppointments.length===0)}}function Be(e,i){if(e&1){let t=b();s(0,"ion-button",30),_("click",function(){m(t);let n=c(2);return g(n.deleteAppointment())}),f(1,"ion-icon",31),d(2," Eliminar cita "),r()}}function ze(e,i){if(e&1){let t=b();s(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3),I(4,"date"),r(),s(5,"ion-buttons",18)(6,"ion-button",19),_("click",function(){m(t);let n=c();return g(n.closeModal())}),f(7,"ion-icon",20),r()()()(),s(8,"ion-content",1)(9,"form",21),_("ngSubmit",function(){m(t);let n=c();return g(n.saveAppointment())}),s(10,"ion-item")(11,"ion-label",22),d(12,"Nombre del cliente"),r(),s(13,"ion-input",23),M("ngModelChange",function(n){m(t);let a=c();return C(a.clientName,n)||(a.clientName=n),g(n)}),r()(),s(14,"ion-item")(15,"ion-checkbox",24),M("ngModelChange",function(n){m(t);let a=c();return C(a.paid,n)||(a.paid=n),g(n)}),d(16,"Ya pag\xF3"),r()(),s(17,"ion-item")(18,"ion-label",22),d(19,"Monto"),r(),s(20,"ion-input",25),M("ngModelChange",function(n){m(t);let a=c();return C(a.amountStr,n)||(a.amountStr=n),g(n)}),r()(),s(21,"ion-item")(22,"ion-label",22),d(23,"Observaciones"),r(),s(24,"ion-textarea",26),M("ngModelChange",function(n){m(t);let a=c();return C(a.notes,n)||(a.notes=n),g(n)}),r()(),s(25,"ion-button",27),f(26,"ion-icon",28),d(27," Guardar "),r(),u(28,Be,3,0,"ion-button",29),r()()}if(e&2){let t=c();l(3),P(" ",Y(4,7,t.selectedDate,"mediumDate")," - ",t.selectedTime," "),l(10),h("ngModel",t.clientName),l(2),h("ngModel",t.paid),l(5),h("ngModel",t.amountStr),l(4),h("ngModel",t.notes),l(4),p("ngIf",t.currentAppointment)}}ne(Ie,"es");var st=(()=>{let i=class i{constructor(o){this.calendarService=o,this.selectedDate=G.getCurrentDate(),this.availableTimes=[],this.appointments=[],this.pastAppointments=[],this.showToast=!1,this.toastMessage="",this.isModalOpen=!1,this.selectedTime="",this.currentAppointment=null,this.clientName="",this.paid=!1,this.amountStr="",this.notes="",J({closeCircleOutline:Me,saveOutline:xe,trashOutline:be})}ionViewWillEnter(){this.selectedDate=G.getCurrentDate(),this.loadDataForSelectedDate()}isPastDate(){let o=G.getCurrentDate();return this.selectedDate<o}loadDataForSelectedDate(){this.isPastDate()?(this.pastAppointments=this.calendarService.getAppointmentsForDate(this.selectedDate),this.availableTimes=[]):(this.availableTimes=this.calendarService.getTimeSlotsForDate(this.selectedDate),this.pastAppointments=[]),this.appointments=this.calendarService.getAppointments()}onDateSelected(o){this.selectedDate=o.detail.value,console.log("selected date",this.selectedDate),this.loadDataForSelectedDate()}isTimeSlotBooked(o){return this.calendarService.getAppointmentsForDate(this.selectedDate).some(a=>a.time===o)}saveAppointment(){var n;let o={id:((n=this.currentAppointment)==null?void 0:n.id)||this.calendarService.generateAppointmentId(this.selectedDate,this.selectedTime),date:this.selectedDate,time:this.selectedTime,clientName:this.clientName,paid:this.paid,amount:this.amountStr?parseFloat(this.amountStr):0,notes:this.notes};this.calendarService.saveAppointment(o),this.loadDataForSelectedDate(),this.showToastMessage("Cita guardada correctamente"),this.closeModal()}showToastMessage(o){this.toastMessage=o,this.showToast=!0,setTimeout(()=>this.showToast=!1,3e3)}openModal(o){this.selectedTime=o,this.currentAppointment=this.appointments.find(n=>n.date===this.selectedDate&&n.time===o)||null,this.currentAppointment?(this.clientName=this.currentAppointment.clientName,this.paid=this.currentAppointment.paid,this.amountStr=this.currentAppointment.amount.toString(),this.notes=this.currentAppointment.notes):this.resetForm(),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1,this.resetForm()}resetForm(){this.clientName="",this.paid=!1,this.amountStr="",this.notes=""}deleteAppointment(){this.currentAppointment&&(this.calendarService.deleteAppointment(this.currentAppointment.id),this.loadDataForSelectedDate(),this.showToastMessage("Cita eliminada correctamente"),this.closeModal())}};i.\u0275fac=function(n){return new(n||i)(q(Pe))},i.\u0275cmp=K({type:i,selectors:[["app-calendar"]],decls:12,vars:12,consts:[["title","Calendario - citas"],[1,"ion-padding"],[2,"text-align","center"],[1,"date-picker-container"],["presentation","date",3,"ngModelChange","ionChange","ngModel"],["class","time-slots-container",4,"ngIf"],["class","past-appointments-container",4,"ngIf"],[3,"didDismiss","isOpen"],["duration","3000","position","top",3,"isOpen","message"],[1,"time-slots-container"],["size","6",4,"ngFor","ngForOf"],["size","6"],["expand","block","fill","outline","shape","round",1,"time-button",3,"click","keyup"],["class","booked-label",4,"ngIf"],[1,"booked-label"],[1,"past-appointments-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],["slot","end",2,"display","flex","align-items","center"],[3,"click"],["name","close-circle-outline"],[3,"ngSubmit"],["position","floating"],["name","clientName","required","",3,"ngModelChange","ngModel"],["name","paid",3,"ngModelChange","ngModel"],["type","text","name","amount",3,"ngModelChange","ngModel"],["name","notes",3,"ngModelChange","ngModel"],["expand","block","type","submit","shape","round"],["name","save-outline"],["expand","block","shape","round","color","danger",3,"click",4,"ngIf"],["expand","block","shape","round","color","danger",3,"click"],["name","trash-outline"]],template:function(n,a){n&1&&(f(0,"app-header",0),s(1,"ion-content",1)(2,"ion-text",2),d(3),I(4,"date"),r(),s(5,"div",3)(6,"ion-datetime",4),M("ngModelChange",function(x){return C(a.selectedDate,x)||(a.selectedDate=x),x}),_("ionChange",function(x){return a.onDateSelected(x)}),r()(),u(7,Ae,4,1,"div",5)(8,We,7,6,"div",6),s(9,"ion-modal",7),_("didDismiss",function(){return a.closeModal()}),u(10,ze,29,10,"ng-template"),r(),f(11,"ion-toast",8),r()),n&2&&(l(3),v(" Citas del ",te(4,7,a.selectedDate,"EEEE, d MMMM y","","es")," "),l(3),h("ngModel",a.selectedDate),l(),p("ngIf",!a.isPastDate()),l(),p("ngIf",a.isPastDate()),l(),p("isOpen",a.isModalOpen),l(2),p("isOpen",a.showToast)("message",a.toastMessage))},dependencies:[re,ie,oe,ae,ge,pe,se,le,me,ce,de,we,k,B,L,D,N,E,S,H,y,T,F,A,W,O,j,z,U,w,R,V,ve],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--app-border-radius: 12px;--app-transition: all .3s ease;--app-shadow-light: 0 4px 16px rgba(0, 0, 0, .1);--app-shadow-dark: 0 4px 16px rgba(0, 0, 0, .5)}ion-content[_ngcontent-%COMP%]{--padding-top: 16px;--padding-bottom: 24px}ion-text[_ngcontent-%COMP%]{display:block;font-weight:600;font-size:18px;margin-bottom:20px;letter-spacing:-.3px}.date-picker-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:16px}.date-picker-container[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]{border-radius:12px}.date-picker-container[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]::part(calendar-day){border-radius:50%}.date-picker-container[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]::part(calendar-day-active){background:var(--ion-color-primary);color:#fff;font-weight:700}.time-slots-container[_ngcontent-%COMP%]{margin-top:24px;animation:_ngcontent-%COMP%_fadeIn .5s cubic-bezier(.23,1,.32,1)}.time-slots-container[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding:0}.time-slots-container[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:4px}.time-button[_ngcontent-%COMP%]{margin:0;height:52px;--border-width: 1px;--color: var(--ion-color-primary);--padding-start: 8px;--padding-end: 8px;--transition: var(--app-transition)}.time-button[_ngcontent-%COMP%]:hover{--background: rgba(var(--ion-color-primary-rgb), .1);--opacity: 1;transform:translateY(-2px)}.time-button[disabled][_ngcontent-%COMP%]{--background: rgba(var(--ion-color-medium-rgb), .1);--border-color: var(--ion-color-medium);--color: var(--ion-color-medium);opacity:.7;cursor:not-allowed}.time-button.time-booked[_ngcontent-%COMP%]{position:relative;overflow:visible}.booked-label[_ngcontent-%COMP%]{font-size:.8em;color:var(--ion-color-danger);font-weight:500;margin-left:5px}.past-appointments-container[_ngcontent-%COMP%]{margin-top:24px;animation:_ngcontent-%COMP%_fadeIn .5s cubic-bezier(.23,1,.32,1)}.past-appointments-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:transparent;padding:0;margin-top:16px;border-radius:var(--app-border-radius);overflow:hidden}.past-appointments-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--padding-top: 12px;--padding-bottom: 12px;--border-radius: var(--app-border-radius);--background: rgba(var(--ion-color-light-rgb), .7);margin-bottom:8px}.past-appointments-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;font-size:16px;margin-bottom:4px}.past-appointments-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:4px 0}.past-appointments-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{font-weight:500}ion-modal[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--inner-padding-end: 0;margin-bottom:16px}ion-modal[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500}ion-modal[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], ion-modal[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;--padding-top: 12px;--padding-bottom: 12px;--background: rgba(var(--ion-color-light-rgb), .7)}ion-modal[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-right:12px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}@media (prefers-color-scheme: dark){.time-button[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .05)}.time-button[_ngcontent-%COMP%]:hover{--background: rgba(var(--ion-color-primary-rgb), .2)}.past-appointments-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .1)}ion-modal[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], ion-modal[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .08)}}']});let e=i;return e})();export{st as default};
